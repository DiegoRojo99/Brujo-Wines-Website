<!DOCTYPE html>
<html lang="es">

<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
 
	<!-- CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
    <link rel="stylesheet" href="css/style.css">
    <script src="https://www.gstatic.com/firebasejs/ui/6.0.1/firebase-ui-auth.js"></script>
    <link type="text/css" rel="stylesheet" href="https://www.gstatic.com/firebasejs/ui/6.0.1/firebase-ui-auth.css" />

	<meta name="author" content="Diego Rojo">
	<title>Brujo Wines</title>

</head>
<body>
  <!-- NAV -->
  <div>
      <img id="header-photo" src="img/bodega/bodega1.png">
      <header class="header">
          <nav class="navbar">
              <a href="index.html" class="nav-logo">
                  <img src="./img/logo.png">
              </a>
              <ul class="nav-menu">
                  <li class="nav-item">
                      <a href="vinos.html" class="nav-link">Vinos</a>
                  </li>
                  <li class="nav-item">
                      <a href="galeria.html" class="nav-link">Galeria</a>
                  </li>
                  <li class="nav-item">
                      <a href="reservas.html" class="nav-link">Reservas</a>
                  </li>
                  <li class="nav-item">
                      <a id="boton-mostrar-formulario" href="#" class="nav-link">Log-In</a>
                  </li>
              </ul>
              <div class="hamburger">
                  <span class="bar"></span>
                  <span class="bar"></span>
                  <span class="bar"></span>
              </div>
          </nav>
      </header>
  </div>


  <div id="tienda-online">
      <div id="tienda-top">
        <h3>TIENDA ONLINE
            <i id="carrito-tienda" class="fa-solid fa-cart-shopping"></i>
        </h3>
        <div id="carrito">
            <table id="tabla-carrito">
                <thead>
                    <tr>
                        <th>Imagen</th>
                        <th>Nombre</th>
                        <th>Precio</th>
                        <th>Unidades</th>
                    </tr>
                </thead>
                <tbody>
                    <tr id="titania-blanco-fila">
                        <td>
                            <img src="./img/TitaniaBlanco.png">
                        </td>
                        <td>Titania Blanco</td>
                        <td>40€</td>
                        <td id="unidades-blanco">0</td>
                    </tr>
                    <tr id="titania-tinto-fila">
                        <td>
                            <img src="./img/TitaniaTinto.png">
                        </td>
                        <td>Titania Tinto</td>
                        <td>40€</td>
                        <td id="unidades-tinto">0</td>
                    </tr>
                    <tr id="titania-rosado-fila">
                        <td>
                            <img src="./img/TitaniaRosado.png">
                        </td>
                        <td>Titania Rosado</td>
                        <td>40€</td>
                        <td id="unidades-rosado">0</td>
                    </tr>
                </tbody>
            </table>
            <button id="vaciar-carrito" onclick="vaciarCarrito()">Vaciar Carrito</button>
        </div>

      </div>
      
        <div id="primera-linea" class="row">
            <div class="col-sm-6">
                <div class="card" style="max-width: 720px;">
                    <div class="row g-0">
                    <div class="col-md-4">
                        <a href="./vinos/titaniaBlanco.html">
                        <img src="img/TitaniaBlanco.png" class="img-fluid rounded-start" alt="Imagen de Titania Blanco">
                        </a>
                    </div>
                    <div class="col-md-8">
                        <div class="card-body">
                        <h5 class="card-title">Titania Blanco</h5>
                        <p class="card-text">
                            Nuestra variante del blanco 100% tempranillo, elaborado en nuestras instalaciones de San Vicente de la Sonsierra. Diferente a la gran mayoría de vinos blancos en Rioja mayormente elaborados con la variedad Viura. Aromas a frutas con hueso, por ejemplo el melocotón y florales. Con un tacto sedoso y amable en boca. Con elegancia, frescura, y equilibrio con los aromas tostados de roble que hacen que la nariz y la boca de este fino sean sedosos, agradables, y que nos invite a beber por su facilidad de consumo.
                        </p>
                        <button onclick="añadirVino('blanco')" class="boton-añadir">Añade al carrito</button>
                        </div>
                    </div>
                    </div>
                </div>
            </div>
            <div class="col-sm-6">
                <div class="card mb-3" style="max-width: 720px;">
                    <div class="row g-0">
                    <div class="col-md-4">
                        <a href="./vinos/titaniaRosado.html">
                        <img src="img/TitaniaRosado.png" class="img-fluid rounded-start" alt="Foto del Titania Rosado">
                        </a>
                    </div>
                    <div class="col-md-8">
                        <div class="card-body">
                        <h5 class="card-title">Titania Rosado</h5>
                        <p class="card-text">
                            Nuestra variante de rosado 100% tempranillo, elaborado en nuestras instalaciones de San Vicente de la Sonsierra. Muy aromático, floral y una aguja muy fina para culminar un conjunto muy sabroso, con ligeros toques almibarados, melocotón y sensación dulzona siendo totalmente seco. Perfecto para acompañar entrantes ligeros, aperitivos, arroces, pasta fresca y pescados, para disfrutar de las agradables sensaciones que nos sugiere Titania Rosado.
                        </p>
                        <button onclick="añadirVino('rosado')" class="boton-añadir">Añade al carrito</button>
                        </div>
                    </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="row">
        <div class="col-sm-6">
            <div class="card mb-3" style="max-width: 720px;">
                <div class="row g-0">
                    <div class="col-md-4">
                    <a href="./vinos/titaniaTinto.html">
                    <img src="img/TitaniaTinto.png" class="img-fluid rounded-start" alt="Foto del Titania Tinto">
                    </a>
                    </div>
                    <div class="col-md-8">
                    <div class="card-body">
                        <h5 class="card-title">Titania Tinto</h5>
                        <p class="card-text">
                        Nuestra variante de tinto 100% tempranillo, elaborado en nuestras instalaciones de San Vicente de la Sonsierra. Es un vino sedoso, con una estructura en boca potente y con tanino amable que nos deja un impresionante sabor a fruta equilibrada con los toques de coco y café procedente del roble americano, y toques de vainilla y frutos secos y balsámicos procedentes del roble francés. Perfecto para acompañar carnes rojas, caza o guisos que nos ayuden a potenciar las agradables sensaciones que nos transmite Titania Tinto.
                        </p>
                        <button onclick="añadirVino('blanco')" class="boton-añadir">Añade al carrito</button>
                    </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

  </div>
  

  <footer>
    <img id="FooterLogo" src="img/logo-marron.svg" alt="Logo de Brujo Wines">
    <br>
    <hr class="linea-hr"/>
    <br>

    <div id="redes-sociales">
      <h5>Contacte con nosotros</h5>
      <ul id="FooterList">
        <li class="FooterItem">
          <a href="tel:941046115">
            <i class="fa-solid fa-phone"> +34 941 046 115 </i>
          </a>
        </li>
        <li class="FooterItem">
          <a href="mailto:comercial@brujowines.com">
            <i class="fa-solid fa-envelope"> Nuestro Correo </i>
          </a>
        </li>
      </ul>
    </div>
    <div id="google-maps">
      <div class="mapouter">
      </div>
    </div>
    <div id="footer-horas-desc">
    <h4>Visita Brujo Wines</h4>
      <div id="salon-catas">
          <h6>Salon de Catas</h6>
          <p>Horas 10:00-18:00</p>
          <p>Direccion Linea 1<br>Direccion Linea 2<br>Direccion Linea 3</p>
      </div>
      <div id="visita-bodega">
          <h6>Visita</h6>
          <p>Horas 10:00-18:00</p>
          <p>Direccion Linea 1<br>Direccion Linea 2<br>Direccion Linea 3</p>
      </div>
    </div>
  </footer>

    <!-- The core Firebase JS SDK is always required and must be listed first -->
    <script src="https://www.gstatic.com/firebasejs/7.14.1/firebase-app.js"></script>
    <!-- TODO: Add SDKs for Firebase products that you want to use-->
    <script src="https://www.gstatic.com/firebasejs/7.14.1/firebase-auth.js"></script>
    <script>
      // Your web app's Firebase configuration
      var firebaseConfig = {
        apiKey: "AIzaSyBqFvsjkgTdQuinpZhAWLKPcghZa4gk0eU",
        authDomain: "brujowines.firebaseapp.com",
        databaseURL: "https://brujowines-default-rtdb.firebaseio.com",
        projectId: "brujowines",
        storageBucket: "brujowines.appspot.com",
        messagingSenderId: "1017605599237",
        appId: "1:1017605599237:web:8faf234b61927b164eac6c",
        measurementId: "G-NW2R0GGXKB"
      };
      // Initialize Firebase
      firebase.initializeApp(firebaseConfig);
    </script>
    <script>
      //invokes firebase authentication.
      const auth = firebase.auth();

      document.querySelector("#todavia-no-registrado").addEventListener("click", () => {
        showRegistration();
      });

      const showRegistration = () => {
        document.querySelector("#registration-page").classList.remove("hide");
        document.querySelector("#login-page").classList.add("hide");
        document.querySelector("#homepage").classList.add("hide");
      };

      document.querySelector("#ya-registrado").addEventListener("click", () => {
        showLogin();
      });

      const showLogin = () => {
        document.querySelector("#registration-page").classList.add("hide");
        document.querySelector("#login-page").classList.remove("hide");
        document.querySelector("#homepage").classList.add("hide");
      };

      document.querySelector("#signout").addEventListener("click", () => {
        signOut();
      });

      const register = () => {
        const email = document.querySelector("#registration-email").value;
        const reemail = document.querySelector("#registration-reemail").value;
        const password = document.querySelector("#registration-password").value;

        if (email.trim() == "") {
          alert("Introduzca el email");
        } else if (password.trim().length < 6) {
          alert("La contraseña tiene que ser de al menos 6 caracteres");
        } else if (email != reemail) {
          alert("Los correos no coinciden");
        } else {
          auth
            .createUserWithEmailAndPassword(email, password)
            .catch(function (error) {
              // Handle Errors here.
              var errorCode = error.code;
              var errorMessage = error.message;
              alert(errorMessage);
              // ...
            });
        }
      };

      document.querySelector("#register").addEventListener("click", () => {
        register();
      });

      //register when you hit the enter key
      document
        .querySelector("#registration-password")
        .addEventListener("keyup", (e) => {
          if (event.keyCode === 13) {
            e.preventDefault();

            register();
          }
        });

      const login = () => {
        const email = document.querySelector("#login-email").value;
        const password = document.querySelector("#login-password").value;

        if (email.trim() == "") {
          alert("Introduzca el email");
        } else if (password.trim() == "") {
          alert("Introduzca la contraseña");
        } else {
          authenticate(email, password);
        }
      };

      document.querySelector("#login").addEventListener("click", () => {
        login();
      });

      //Iniciar Sesión when you hit enter
      document
        .querySelector("#login-password")
        .addEventListener("keyup", (e) => {
          if (event.keyCode === 13) {
            e.preventDefault();

            login();
          }
        });

      const authenticate = (email, password) => {
        const auth = firebase.auth();
        auth.signInWithEmailAndPassword(email, password);
        firebase
          .auth()
          .signInWithEmailAndPassword(email, password)
          .catch(function (error) {
            // Handle Errors here.
            var errorCode = error.code;
            var errorMessage = error.message;
            alert(errorMessage);
          });
      };

      const showHomepage = () => {
        document.querySelector("#registration-page").classList.add("hide");
        document.querySelector("#login-page").classList.add("hide");
        document.querySelector("#homepage").classList.remove("hide");
      };

      const signOut = () => {
        firebase
          .auth()
          .signOut()
          .then(function () {
            location.reload();
          })
          .catch(function (error) {
            alert("Error al cerrar sesión, compruebe la conexión");
          });
      };

      auth.onAuthStateChanged((firebaseUser) => {
        if (firebaseUser) {
          showHomepage();
        }
      });

      document
        .querySelector("#forgot-password")
        .addEventListener("click", () => {
          const email = document.querySelector("#login-email").value;
          if (email.trim() == "") {
            alert("Introduzca el email");
          } else {
            forgotPassword(email);
          }
        });

      const forgotPassword = (email) => {
        auth
          .sendPasswordResetEmail(email)
          .then(function () {
            alert("El email ha sido enviado");
          })
          .catch(function (error) {
            alert("Hay un error. Compruebe su email o su conexión.");
          });
      };
    </script>
    <script src="./js/tienda.js"></script>
    <script src="./js/menu.js"></script>
    <script src="./js/loggingForm.js"></script>
    <script src="https://kit.fontawesome.com/0fa11aa035.js" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.10.2/dist/umd/popper.min.js" integrity="sha384-7+zCNj/IqJ95wo16oMtfsKbZ9ccEh31eOz1HGyDuCQ6wgnyJNSYdrPa03rtR1zdB" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.min.js" integrity="sha384-QJHtvGhmr9XOIpI6YVutG+2QOK9T+ZnN4kzFN1RtK3zEFEIsxhlmWl5/YESvpZ13" crossorigin="anonymous"></script>
</body>

</html>